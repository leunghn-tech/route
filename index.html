<!DOCTYPE html>
<html lang="zh-HK">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å®‡è±çš„è¡¨é”äº‹ä»¶ç°¿</title>
    
    <!-- å¼•å…¥ Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- å¼•å…¥ React å’Œ ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- å¼•å…¥ Babel ç”¨æ–¼ç€è¦½å™¨ç«¯ç·¨è­¯ JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <!-- å¼•å…¥ Lucide Icons (SVG ç‰ˆ) -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <style>
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px) rotate(-3deg); }
            75% { transform: translateX(5px) rotate(3deg); }
        }
        .animate-shake { animation: shake 0.4s ease-in-out; }
        .animate-fade-in-up { animation: fadeInUp 0.6s ease-out forwards; }
        @keyframes fadeInUp { 
            from { opacity: 0; transform: translateY(20px); } 
            to { opacity: 1; transform: translateY(0); } 
        }
    </style>
</head>
<body class="bg-orange-50 text-slate-800 font-sans">

    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // --- Icon Components (ä½¿ç”¨ SVG æ›¿ä»£ lucide-react ä»¥æ”¯æ´å–®ä¸€ HTML) ---
        const IconBookOpen = () => <svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"></path><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"></path></svg>;
        const IconStar = ({size=24, className=""}) => <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} className={className} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon></svg>;
        const IconCheckCircle = ({size=24}) => <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path><polyline points="22 4 12 14.01 9 11.01"></polyline></svg>;
        const IconXCircle = ({size=24}) => <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="12" cy="12" r="10"></circle><line x1="15" y1="9" x2="9" y2="15"></line><line x1="9" y1="9" x2="15" y2="15"></line></svg>;
        const IconChevronRight = ({size=24}) => <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><polyline points="9 18 15 12 9 6"></polyline></svg>;
        const IconAward = ({size=80, className=""}) => <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} className={className} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="12" cy="8" r="7"></circle><polyline points="8.21 13.89 7 23 12 20 17 23 15.79 13.88"></polyline></svg>;
        const IconThumbsUp = ({size=24}) => <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M14 9V5a3 3 0 0 0-3-3l-4 9v11h11.28a2 2 0 0 0 2-1.7l1.38-9a2 2 0 0 0-2-2.3zM7 22H4a2 2 0 0 1-2-2v-7a2 2 0 0 1 2-2h3"></path></svg>;
        const IconRefreshCw = ({size=24}) => <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><polyline points="23 4 23 10 17 10"></polyline><polyline points="1 20 1 14 7 14"></polyline><path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"></path></svg>;

        // --- éŠæˆ²è³‡æ–™åº« ---
        const FRAMEWORK_STEPS = [
          "äº‹ä»¶èƒŒæ™¯",
          "ç™¼ç”Ÿçš„äº‹æƒ…",
          "æˆ‘çš„æƒ³æ³•æˆ–æ„Ÿå—",
          "æˆ‘çš„åæ‡‰æˆ–è¡Œç‚º",
          "çµæœæˆ–å­¸åˆ°çš„æ±è¥¿"
        ];

        const SCENARIOS = [
          {
            title: "ğŸ§¸ ç©å…·åˆ†äº«äº‹ä»¶",
            sentences: [
              { text: "åœ¨å­¸æ ¡å°æ¯æ™‚ï¼Œæˆ‘å’Œæœ‹å‹åœ¨èª²å®¤è£¡", stepIndex: 0 },
              { text: "æˆ‘çœ‹åˆ°ä»–æ‹¿å‡ºä¸€å€‹å¾ˆé…·çš„æ–°ç©å…·", stepIndex: 1 },
              { text: "æˆ‘è¦ºå¾—å¾ˆå¥½å¥‡ï¼Œå¿ƒè£¡å¾ˆæƒ³å’Œä»–ä¸€èµ·ç©", stepIndex: 2 },
              { text: "æˆ‘ä¸»å‹•èµ°éå»å•ä»–ï¼šã€Œæˆ‘å¯ä»¥å’Œä½ ä¸€èµ·ç©å—ï¼Ÿã€", stepIndex: 3 },
              { text: "æˆ‘å€‘é–‹å¿ƒåœ°ä¸€èµ·ç©ï¼Œæˆ‘å­¸æœƒäº†ä¸»å‹•è¡¨é”è‡ªå·±çš„æƒ³æ³•", stepIndex: 4 }
            ]
          },
          {
            title: "ğŸ’§ æ‰“ç¿»æ°´æ¯äº‹ä»¶",
            sentences: [
              { text: "åœ¨é£¯å ‚åƒåˆé¤çš„æ™‚å€™", stepIndex: 0 },
              { text: "æˆ‘ä¸å°å¿ƒæ‰“ç¿»äº†æ°´æ¯ï¼ŒæŠŠæ¡Œå­å¼„æ¿•äº†", stepIndex: 1 },
              { text: "æˆ‘è¦ºå¾—å¾ˆæ…Œå¼µï¼Œä¹Ÿæœ‰é»ä¸å¥½æ„æ€", stepIndex: 2 },
              { text: "æˆ‘é¦¬ä¸Šæ‹¿ç´™å·¾æ¸…ç†ï¼Œä¸¦å‘æ—é‚Šçš„åŒå­¸é“æ­‰", stepIndex: 3 },
              { text: "åŒå­¸åŸè«’äº†æˆ‘ï¼Œæˆ‘å­¸æœƒäº†åšäº‹è¦æ›´å°å¿ƒ", stepIndex: 4 }
            ]
          },
          {
            title: "ğŸ“š å¿˜è¨˜å¸¶åŠŸèª²äº‹ä»¶",
            sentences: [
              { text: "æ—©ä¸Šå›åˆ°å­¸æ ¡ï¼Œæº–å‚™äº¤åŠŸèª²æ™‚", stepIndex: 0 },
              { text: "æˆ‘ç¿»éäº†æ›¸åŒ…ï¼Œç™¼ç¾è‡ªå·±å¿˜è¨˜å¸¶ä¸­æ–‡åŠŸèª²", stepIndex: 1 },
              { text: "æˆ‘è¦ºå¾—å¾ˆå®³æ€•ï¼Œæ“”å¿ƒæœƒè¢«è€å¸«è²¬ç½µ", stepIndex: 2 },
              { text: "æˆ‘èª å¯¦åœ°å‘è€å¸«æ‰¿èªéŒ¯èª¤ï¼Œä¸¦ä¿è­‰æ˜å¤©ä¸€å®šæœƒè£œäº¤", stepIndex: 3 },
              { text: "è€å¸«åŸè«’äº†æˆ‘ï¼Œæˆ‘å­¸æœƒäº†æ¯æ™šéƒ½è¦æª¢æŸ¥æ›¸åŒ…", stepIndex: 4 }
            ]
          },
          {
            title: "âš½ åŒå­¸çˆ­åŸ·äº‹ä»¶",
            sentences: [
              { text: "å°æ¯æ™‚åœ¨æ“å ´ä¸Š", stepIndex: 0 },
              { text: "æˆ‘å’ŒåŒå­¸ç‚ºäº†ä¸€å€‹è¶³çƒèª°å…ˆè¸¢è€Œåµäº†èµ·ä¾†", stepIndex: 1 },
              { text: "æˆ‘è¦ºå¾—å¾ˆç”Ÿæ°£ï¼Œä¹Ÿè¦ºå¾—å°æ–¹å¾ˆä¸è¬›ç†", stepIndex: 2 },
              { text: "æˆ‘æ·±å‘¼å¸å†·éœä¸‹ä¾†ï¼Œä¸¦æè­°æˆ‘å€‘è¼ªæµè¸¢", stepIndex: 3 },
              { text: "æˆ‘å€‘å’Œå¥½å¦‚åˆï¼Œæˆ‘å­¸æœƒäº†é‡åˆ°è¡çªæ™‚è¦äº’ç›¸ç¦®è®“", stepIndex: 4 }
            ]
          },
          {
            title: "ğŸ“ æ¸¬é©—å¤±æº–äº‹ä»¶",
            sentences: [
              { text: "åœ¨èª²å®¤è£¡æ´¾ç™¼æ•¸å­¸æ¸¬é©—å·çš„æ™‚å€™", stepIndex: 0 },
              { text: "æˆ‘ç™¼ç¾è‡ªå·±åªæ‹¿äº†ä¸åˆæ ¼çš„åˆ†æ•¸", stepIndex: 1 },
              { text: "æˆ‘è¦ºå¾—å¾ˆé›£éï¼Œä¹Ÿå¾ˆæ“”å¿ƒå›å®¶æœƒè¢«çˆ¶æ¯è²¬å‚™", stepIndex: 2 },
              { text: "æˆ‘ä¸»å‹•æ‰¾è€å¸«è«‹å•éŒ¯åœ¨å“ªè£¡ï¼Œä¸¦æ±ºå¿ƒä¸‹æ¬¡æ›´èªçœŸæº«ç¿’", stepIndex: 3 },
              { text: "è€å¸«ç¨±è®šäº†æˆ‘çš„å­¸ç¿’æ…‹åº¦ï¼Œæˆ‘æ˜ç™½äº†å¤±æ•—ä¹ƒæˆåŠŸä¹‹æ¯", stepIndex: 4 }
            ]
          },
          {
            title: "ğŸ¤ èˆå°è¡¨æ¼”äº‹ä»¶",
            sentences: [
              { text: "åœ¨å­¸æ ¡èˆ‰è¾¦å‘¨å¹´æ‰è—è¡¨æ¼”çš„èˆå°ä¸Š", stepIndex: 0 },
              { text: "è¼ªåˆ°æˆ‘å‡ºå ´å”±æ­Œï¼Œä½†æˆ‘çªç„¶å¿˜è¨˜äº†æ­Œè©", stepIndex: 1 },
              { text: "æˆ‘ç•¶æ™‚ç·Šå¼µå¾—å¿ƒè·³åŠ é€Ÿï¼Œè…¦è¢‹ä¸€ç‰‡ç©ºç™½", stepIndex: 2 },
              { text: "æˆ‘çœ‹è‘—å°ä¸‹è€å¸«é¼“å‹µçš„çœ¼ç¥ï¼Œè·Ÿè‘—éŸ³æ¨‚ç¯€å¥ç¹¼çºŒå“¼å”±", stepIndex: 3 },
              { text: "è§€çœ¾çµ¦äº†æˆ‘ç†±çƒˆçš„æŒè²ï¼Œæˆ‘å­¸åˆ°äº†é‡åˆ°çªç™¼æƒ…æ³è¦ä¿æŒé®å®š", stepIndex: 4 }
            ]
          },
          {
            title: "ğŸ” éºå¤±ç‰©å“äº‹ä»¶",
            sentences: [
              { text: "æ”¾å­¸å¾Œåœ¨å­¸æ ¡åœ–æ›¸é¤¨è£¡", stepIndex: 0 },
              { text: "æˆ‘æ‰¾ä¸åˆ°æˆ‘çš„å…«é”é€šå¡ï¼Œä¸èƒ½æ­è»Šå›å®¶", stepIndex: 1 },
              { text: "æˆ‘æ€¥å¾—å¿«è¦å“­å‡ºä¾†ï¼Œä¸çŸ¥é“è©²æ€éº¼è¾¦æ‰å¥½", stepIndex: 2 },
              { text: "æˆ‘èµ°åˆ°æ ¡å‹™è™•ï¼Œè«‹è·å“¡å¹«å¿™æ‰“é›»è©±çµ¦å®¶äºº", stepIndex: 3 },
              { text: "å®¶äººå¾ˆå¿«ä¾†æ¥æˆ‘ï¼Œæˆ‘å­¸æœƒäº†æ±è¥¿è¦æ”¶æ‹¾å¥½ä¸¦æ”¾åœ¨å›ºå®šçš„ä½ç½®", stepIndex: 4 }
            ]
          }
        ];

        // --- ä¸»è¦æ‡‰ç”¨ç¨‹å¼å…ƒä»¶ ---
        function App() {
          const [gameState, setGameState] = useState('welcome');
          const [score, setScore] = useState(0);

          const renderScreen = () => {
            switch (gameState) {
              case 'welcome': return <WelcomeScreen onNext={() => setGameState('step-order')} />;
              case 'step-order': return <StepOrderGame onNext={() => setGameState('scenarios')} />;
              case 'scenarios': return <ScenariosGame onNext={() => setGameState('criteria')} score={score} setScore={setScore} />;
              case 'criteria': return <CriteriaScreen onNext={() => setGameState('end')} />;
              case 'end': return <EndScreen score={score} onRestart={() => { setGameState('welcome'); setScore(0); }} />;
              default: return <WelcomeScreen onNext={() => setGameState('step-order')} />;
            }
          };

          return (
            <div className="min-h-screen p-4 md:p-8 flex items-center justify-center">
              <div className="max-w-3xl w-full bg-white rounded-3xl shadow-xl overflow-hidden border-4 border-orange-200 relative">
                <div className="bg-orange-500 text-white p-6 text-center relative overflow-hidden">
                  <div className="absolute top-0 left-0 w-full h-full bg-[url('https://www.transparenttextures.com/patterns/cubes.png')] opacity-20"></div>
                  <h1 className="text-3xl md:text-4xl font-bold relative z-10 flex items-center justify-center gap-3">
                    <IconBookOpen />
                    å®‡è±çš„è¡¨é”äº‹ä»¶ç°¿
                  </h1>
                  <p className="text-orange-100 mt-2 text-lg relative z-10">2Vç­ (10) ç”˜å®‡è± å°ˆå±¬è¨“ç·´å ´</p>
                </div>
                <div className="p-6 md:p-10 min-h-[400px]">
                  {renderScreen()}
                </div>
              </div>
            </div>
          );
        }

        // --- ç•«é¢ 1ï¼šæ­¡è¿ç•«é¢ ---
        function WelcomeScreen({ onNext }) {
          return (
            <div className="text-center animate-fade-in-up">
              <div className="inline-block p-6 bg-yellow-100 rounded-full mb-6">
                <IconStar size={64} className="text-yellow-500 animate-pulse" />
              </div>
              <h2 className="text-2xl font-bold mb-4 text-slate-700">æº–å‚™å¥½æ¥å—æŒ‘æˆ°äº†å—ï¼Ÿ</h2>
              <p className="text-lg text-slate-600 mb-8 leading-relaxed max-w-lg mx-auto">
                é€™å€‹è¨“ç·´å ´æœƒå¹«åŠ©ä½ ç†Ÿç·´åœ°é‹ç”¨ã€Œè¡¨é”æ¡†æ¶äº”æ­¥æ›²ã€ã€‚
                ä½ å¯ä»¥é‡è¤‡ç·´ç¿’ï¼Œç›´åˆ°å®Œå…¨æŒæ¡ç‚ºæ­¢ï¼
                è¨˜ä½æˆ‘å€‘çš„å£è™Ÿï¼š<strong className="text-orange-600">I can do this!</strong>
              </p>
              <button onClick={onNext} className="bg-orange-500 hover:bg-orange-600 text-white text-xl font-bold py-4 px-10 rounded-full shadow-lg transform transition hover:scale-105 active:scale-95 flex items-center gap-2 mx-auto">
                é–‹å§‹æŒ‘æˆ° <IconChevronRight />
              </button>
            </div>
          );
        }

        // --- ç•«é¢ 2ï¼šäº”æ­¥æ›²é‡çµ„ ---
        function StepOrderGame({ onNext }) {
          const [shuffledSteps, setShuffledSteps] = useState([]);
          const [correctCount, setCorrectCount] = useState(0);
          const [errorIndex, setErrorIndex] = useState(null);

          useEffect(() => {
            const shuffled = [...FRAMEWORK_STEPS].map((step, i) => ({ step, originalIndex: i }))
                                                 .sort(() => Math.random() - 0.5);
            setShuffledSteps(shuffled);
          }, []);

          const handleStepClick = (item, currentIndex) => {
            if (item.originalIndex === correctCount) {
              setCorrectCount(prev => prev + 1);
              setErrorIndex(null);
            } else {
              setErrorIndex(currentIndex);
              setTimeout(() => setErrorIndex(null), 800);
            }
          };

          const isComplete = correctCount === FRAMEWORK_STEPS.length;

          return (
            <div className="flex flex-col items-center">
              <h2 className="text-2xl font-bold mb-2 text-orange-600">ç¬¬ä¸€é—œï¼šäº”æ­¥æ›²é‡çµ„</h2>
              <p className="text-slate-600 mb-6">è«‹æŒ‰ç…§æ­£ç¢ºçš„é †åºï¼Œä¾æ¬¡é»æ“Šä¸‹æ–¹çš„æŒ‰éˆ•ã€‚ï¼ˆç­”éŒ¯å¯ä»¥é‡æ–°é»æ“Šï¼ï¼‰</p>

              <div className="w-full max-w-md bg-slate-50 p-4 rounded-xl mb-6 min-h-[250px] border-2 border-dashed border-slate-300">
                <h3 className="text-sm font-bold text-slate-400 mb-3 uppercase tracking-wider text-center">æ­£ç¢ºé †åº</h3>
                <div className="space-y-2">
                  {FRAMEWORK_STEPS.map((step, index) => (
                    <div key={index} className={`p-3 rounded-lg border-2 transition-all duration-500 flex items-center gap-3 ${index < correctCount ? 'bg-green-100 border-green-500 text-green-800 scale-100 opacity-100' : 'bg-slate-100 border-transparent text-slate-400 scale-95 opacity-50'}`}>
                      <div className={`w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold ${index < correctCount ? 'bg-green-500 text-white' : 'bg-slate-300 text-slate-500'}`}>
                        {index + 1}
                      </div>
                      {index < correctCount ? step : 'ç­‰å¾…å¡«å…¥...'}
                    </div>
                  ))}
                </div>
              </div>

              {!isComplete && (
                <div className="flex flex-wrap justify-center gap-3 max-w-lg">
                  {shuffledSteps.map((item, index) => {
                    if (item.originalIndex < correctCount) return null;
                    return (
                      <button key={index} onClick={() => handleStepClick(item, index)} className={`py-2 px-4 rounded-full border-2 border-orange-400 bg-white text-orange-700 font-semibold shadow-sm hover:bg-orange-50 transition-all active:scale-95 ${errorIndex === index ? 'animate-shake bg-red-100 border-red-500 text-red-700' : ''}`}>
                        {item.step}
                      </button>
                    );
                  })}
                </div>
              )}

              {isComplete && (
                <div className="mt-6 text-center animate-bounce">
                  <p className="text-green-600 font-bold text-xl mb-4 flex items-center justify-center gap-2">
                    <IconCheckCircle size={28} /> å®Œç¾ï¼ä½ å·²ç¶“è¨˜ç†Ÿäº”æ­¥æ›²äº†ï¼
                  </p>
                  <button onClick={onNext} className="bg-green-500 hover:bg-green-600 text-white font-bold py-3 px-8 rounded-full shadow-md flex items-center gap-2 mx-auto transition-transform hover:scale-105">
                    é€²å…¥å¯¦æˆ°æ¼”ç·´ <IconChevronRight />
                  </button>
                </div>
              )}
            </div>
          );
        }

        // --- ç•«é¢ 3ï¼šæƒ…å¢ƒé…å°éŠæˆ² ---
        function ScenariosGame({ onNext, score, setScore }) {
          const [currentScenarioIdx, setCurrentScenarioIdx] = useState(0);
          const [currentStepIdx, setCurrentStepIdx] = useState(0);
          const [shuffledSentences, setShuffledSentences] = useState([]);
          const [feedback, setFeedback] = useState({ show: false, isCorrect: false, msg: '' });

          const scenario = SCENARIOS[currentScenarioIdx];

          useEffect(() => {
            if (scenario) {
              const shuffled = [...scenario.sentences].sort(() => Math.random() - 0.5);
              setShuffledSentences(shuffled);
              setCurrentStepIdx(0);
              setFeedback({ show: false, isCorrect: false, msg: '' });
            }
          }, [currentScenarioIdx, scenario]);

          const handleSentenceClick = (sentence) => {
            if (sentence.stepIndex === currentStepIdx) {
              setFeedback({ show: true, isCorrect: true, msg: 'å¤ªæ£’äº†ï¼å®Œå…¨æ­£ç¢ºï¼' });
              setScore(prev => prev + 10);
              setTimeout(() => {
                setFeedback({ show: false, isCorrect: false, msg: '' });
                if (currentStepIdx < 4) {
                  setCurrentStepIdx(prev => prev + 1);
                } else {
                  if (currentScenarioIdx < SCENARIOS.length - 1) {
                    setCurrentScenarioIdx(prev => prev + 1);
                  } else {
                    onNext();
                  }
                }
              }, 1000);
            } else {
              setFeedback({ show: true, isCorrect: false, msg: 'å“å‘€ï¼å¥½åƒä¸å¤ªå°å–”ï¼Œå†ä»”ç´°æƒ³æƒ³é€™æ˜¯å“ªä¸€æ­¥ï¼Ÿ' });
              setTimeout(() => setFeedback({ show: false, isCorrect: false, msg: '' }), 2000);
            }
          };

          if (!scenario) return null;
          const targetStepName = FRAMEWORK_STEPS[currentStepIdx];

          return (
            <div className="flex flex-col items-center w-full">
              <div className="w-full flex justify-between items-center mb-6">
                <h2 className="text-2xl font-bold text-orange-600">ç¬¬äºŒé—œï¼šå¯¦æˆ°æ¼”ç·´</h2>
                <div className="bg-yellow-100 text-yellow-800 px-4 py-1 rounded-full font-bold flex items-center gap-1">
                  <IconStar size={16} /> ç©åˆ†: {score}
                </div>
              </div>

              <div className="w-full bg-blue-50 border border-blue-200 rounded-xl p-5 mb-6 text-center">
                <span className="inline-block bg-blue-200 text-blue-800 text-xs font-bold px-2 py-1 rounded mb-2 uppercase tracking-wide">ç•¶å‰ä»»å‹™ {currentScenarioIdx + 1}/{SCENARIOS.length}</span>
                <h3 className="text-xl font-bold text-blue-900">{scenario.title}</h3>
              </div>

              <div className="mb-6 text-center">
                <p className="text-slate-500 font-medium mb-1">è«‹æ‰¾å‡ºå±¬æ–¼ä»¥ä¸‹æ­¥é©Ÿçš„å¥å­ï¼š</p>
                <div className="inline-block bg-orange-500 text-white font-bold text-lg px-6 py-2 rounded-full shadow-md animate-pulse">
                  æ­¥é©Ÿ {currentStepIdx + 1}: {targetStepName}
                </div>
              </div>

              <div className="w-full space-y-3">
                {shuffledSentences.map((item, idx) => {
                  if (item.stepIndex < currentStepIdx) return null;
                  return (
                    <button key={idx} onClick={() => handleSentenceClick(item)} disabled={feedback.show && feedback.isCorrect} className="w-full text-left p-4 rounded-xl border-2 border-slate-200 bg-white hover:border-orange-400 hover:bg-orange-50 transition-all active:scale-[0.98]">
                      {item.text}
                    </button>
                  );
                })}
              </div>

              {feedback.show && (
                <div className={`mt-6 p-4 rounded-lg flex items-center gap-3 font-bold w-full justify-center transition-all ${feedback.isCorrect ? 'bg-green-100 text-green-700' : 'bg-red-100 text-red-700'}`}>
                  {feedback.isCorrect ? <IconCheckCircle /> : <IconXCircle />}
                  {feedback.msg}
                </div>
              )}
            </div>
          );
        }

        // --- ç•«é¢ 4ï¼šè©•åˆ†æ¨™æº–è‡ªæˆ‘æª¢è¦– ---
        function CriteriaScreen({ onNext }) {
          const [checkedItems, setCheckedItems] = useState({ clear: false, language: false, relevant: false, nonverbal: false });

          const handleCheck = (key) => setCheckedItems(prev => ({ ...prev, [key]: !prev[key] }));
          const allChecked = Object.values(checkedItems).every(val => val === true);

          return (
            <div className="flex flex-col items-center">
              <h2 className="text-2xl font-bold mb-2 text-orange-600">ç¬¬ä¸‰é—œï¼šè©•åˆ†æ¨™æº–æˆ‘è¦è­˜</h2>
              <p className="text-slate-600 mb-6 text-center max-w-lg">åœ¨å¯¦éš›è¡¨é”æ™‚ï¼Œå…‰æœ‰æ¡†æ¶é‚„ä¸å¤ å–”ï¼è«‹å‹¾é¸ä»¥ä¸‹ä½ èªç‚ºè‡ªå·±èƒ½åšåˆ°çš„æ¨™æº–ï¼Œçµ¦è‡ªå·±æ‰“æ‰“æ°£ï¼</p>
              
              <div className="w-full max-w-md space-y-3 mb-8">
                {[
                  { id: 'clear', title: 'è¡¨é”æ¸…æ™° (30%)', desc: 'èƒ½å®Œæ•´è¡¨é”è‡ªå·±çš„ç¶“é©—ã€æ„è¦‹æˆ–æƒ³æ³•ï¼Œä¸çµå·´ã€‚' },
                  { id: 'language', title: 'èªè¨€é‹ç”¨ (30%)', desc: 'æˆ‘æœƒé‹ç”¨æ“´å……å¥å­æŠ€å·§ï¼ˆä¾‹å¦‚ï¼šã€Œå› ç‚º...æ‰€ä»¥...ã€ï¼‰ã€‚' },
                  { id: 'relevant', title: 'å…§å®¹ç›¸é—œæ€§ (30%)', desc: 'æˆ‘åˆ†äº«çš„å…§å®¹ç·Šç·Šè²¼æ‰£ä¸»é¡Œï¼Œä¸æœƒé›¢é¡Œã€‚' },
                  { id: 'nonverbal', title: 'éèªè¨€è¡¨é” (10%)', desc: 'èªªè©±æ™‚ï¼Œæˆ‘æœƒçœ‹è‘—å°æ–¹çš„çœ¼ç›ï¼ˆè‰¯å¥½çš„çœ¼ç¥æ¥è§¸ï¼‰ï¼' }
                ].map(item => (
                  <label key={item.id} className={`flex items-start p-4 border-2 rounded-xl cursor-pointer transition-all ${checkedItems[item.id] ? 'bg-green-50 border-green-500' : 'bg-white border-slate-200'}`}>
                    <input type="checkbox" className="mt-1 w-5 h-5 text-green-600 accent-green-600" checked={checkedItems[item.id]} onChange={() => handleCheck(item.id)} />
                    <div className="ml-3">
                      <span className="block font-bold text-slate-800">{item.title}</span>
                      <span className="text-sm text-slate-500">{item.desc}</span>
                    </div>
                  </label>
                ))}
              </div>

              <button onClick={onNext} disabled={!allChecked} className={`font-bold py-3 px-8 rounded-full shadow-md flex items-center gap-2 transition-all ${allChecked ? 'bg-orange-500 hover:bg-orange-600 text-white transform hover:scale-105' : 'bg-slate-300 text-slate-500 cursor-not-allowed'}`}>
                {allChecked ? 'æˆ‘æº–å‚™å¥½äº†ï¼çœ‹æˆç¸¾' : 'è«‹å‹¾é¸æ‰€æœ‰ä½ æ‰¿è«¾èƒ½åšåˆ°çš„é …ç›®'}
              </button>
            </div>
          );
        }

        // --- ç•«é¢ 5ï¼šçµç®—ç•«é¢ ---
        function EndScreen({ score, onRestart }) {
          return (
            <div className="text-center animate-fade-in-up">
              <div className="inline-block p-6 bg-green-100 rounded-full mb-4">
                <IconAward size={80} className="text-green-500" />
              </div>
              <h2 className="text-3xl font-bold mb-2 text-slate-800">æ­å–œéé—œï¼</h2>
              <p className="text-xl text-orange-600 font-bold mb-6 flex items-center justify-center gap-2">
                <IconThumbsUp /> I can do this!
              </p>
              <div className="bg-slate-50 p-6 rounded-2xl mb-8 max-w-sm mx-auto border-2 border-slate-100 shadow-inner">
                <p className="text-slate-500 mb-1">æœ¬æ¬¡è¨“ç·´ç¸½å¾—åˆ†</p>
                <p className="text-5xl font-black text-orange-500">{score}</p>
                <p className="text-sm text-slate-400 mt-2">å¤ªå²å®³äº†ï¼Œå®‡è±ï¼ä½ å·²ç¶“æ˜¯è¡¨é”å¤§å¸«äº†ï¼</p>
              </div>
              <button onClick={onRestart} className="bg-blue-500 hover:bg-blue-600 text-white font-bold py-3 px-8 rounded-full shadow-lg transform transition hover:scale-105 flex items-center gap-2 mx-auto">
                <IconRefreshCw size={20} /> å†å˜—è©¦ä¸€æ¬¡ (ç·´ç¿’æ›´å¤š)
              </button>
            </div>
          );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
